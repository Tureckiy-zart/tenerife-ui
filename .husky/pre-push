#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
if [ -n "$SKIP_PRE_PUSH" ]; then
  exit 0
fi

echo "üîç PRE-PUSH: Running strict checks (no auto-fix)..."

# –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞, –±–µ–∑ –∞–≤—Ç–æ—Ñ–∏–∫—Å–∞ (–∞–≤—Ç–æ—Ñ–∏–∫—Å —É–∂–µ —Å–¥–µ–ª–∞–Ω –≤ pre-commit)
echo "üîç Running ESLint strict check (no warnings allowed)..."
if ! pnpm run lint:strict; then
  echo ""
  echo "‚ùå ESLint found errors or warnings."
  echo "üí° Run 'pnpm lint:fix' to auto-fix issues, then commit and push again."
  echo ""
  exit 1
fi

echo "‚úÖ All checks passed! Pushing..."
exit 0
